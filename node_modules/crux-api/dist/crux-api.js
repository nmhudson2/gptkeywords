var r=function(r,o){try{if(r<=e){var n=Math.floor(Math.random()*t)+1;return Promise.resolve(new Promise(function(r){return setTimeout(r,n)})).then(function(){return o()})}throw new Error("Max retries reached")}catch(r){return Promise.reject(r)}},e=10,t=6e4;exports.createQueryRecord=function(e){var t=e.key,o=e.fetch||window.fetch;return function e(n,i){void 0===i&&(i=1);try{return Promise.resolve(o("https://chromeuxreport.googleapis.com/v1/records:queryRecord?key="+t,{method:"POST",body:JSON.stringify(n)})).then(function(t){if(t.status>=500)throw new Error("Invalid CrUX API status: "+t.status);return Promise.resolve(t.json()).then(function(t){if(t&&t.error){var o=t.error;if(404===o.code)return null;if(429===o.code)return r(i,function(){return e(n,i+1)});throw new Error(JSON.stringify(o))}if(!t||t&&!t.record.key)throw new Error("Invalid response: "+JSON.stringify(t));return t})})}catch(r){return Promise.reject(r)}}},exports.normalizeUrl=function(r){var e=new URL(r);return e.origin+e.pathname},exports.retryAfterTimeout=r;
